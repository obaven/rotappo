id: ARCH-008
title: 'MIG-1: CLI Stability + Non-Migration Guardrails'
type: Epic
layer: 5
domain: core
component: migration-cli
cli_surface:
  - terminal [actions|snapshot|action|problems|logs]
  - primer [action|reconcile|rotate|debug|nuke|cache|generate|visualize]

description: |
  Preserve the CLI surface for both phenome and primer while the
  runtime architecture evolves. Establish guardrails so CLI behavior
  stays stable and neither repo migrates CLI logic into the other.

deliverables:
  - CLI contract snapshots for phenome and primer
  - Golden tests for CLI outputs and help text
  - Boundary checks that prevent cross-repo CLI dependencies
  - CI/cargo-make tasks that enforce the guardrails

acceptance_criteria:
  - CLI output remains stable for approved fixtures
  - No phenome code imports primer CLI modules
  - No primer CLI imports phenome modules
  - Guardrail checks run in CI and locally via cargo-make

dependencies: []

phase_gate: gitops
effort: M
risk: med

labels:
  - migration
  - cli
  - guardrails
  - testing

source_files:
  - file: src/interfaces/terminal
    context: "Phenome CLI surface"
  - file: src/bin/terminal.rs
    context: "Phenome CLI entry"
  - file: ../primer/src/cli
    context: "Primer CLI surface"
  - file: ../primer/src/main.rs
    context: "Primer CLI entry"
  - file: Makefile.toml
    context: "Guardrail task wiring"

status: MustHaves
state: Backlog
status_capsule: (owner:@antigravity, updated:2026-01-04, status:backlog)
assignee: unassigned
