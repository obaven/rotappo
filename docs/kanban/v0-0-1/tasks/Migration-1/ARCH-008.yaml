id: ARCH-008
title: 'MIG-1: CLI Stability + Non-Migration Guardrails'
type: Epic
layer: 5
domain: core
component: migration-cli
cli_surface:
  - terminal [actions|snapshot|action|problems|logs]
  - bootstrappo [action|reconcile|rotate|debug|nuke|cache|generate|visualize]

description: |
  Preserve the CLI surface for both rotappo and bootstrappo while the
  runtime architecture evolves. Establish guardrails so CLI behavior
  stays stable and neither repo migrates CLI logic into the other.

deliverables:
  - CLI contract snapshots for rotappo and bootstrappo
  - Golden tests for CLI outputs and help text
  - Boundary checks that prevent cross-repo CLI dependencies
  - CI/cargo-make tasks that enforce the guardrails

acceptance_criteria:
  - CLI output remains stable for approved fixtures
  - No rotappo code imports bootstrappo CLI modules
  - No bootstrappo CLI imports rotappo modules
  - Guardrail checks run in CI and locally via cargo-make

dependencies: []

phase_gate: gitops
effort: M
risk: med

labels:
  - migration
  - cli
  - guardrails
  - testing

source_files:
  - file: src/interfaces/terminal
    context: "Rotappo CLI surface"
  - file: src/bin/terminal.rs
    context: "Rotappo CLI entry"
  - file: ../bootstrappo/src/cli
    context: "Bootstrappo CLI surface"
  - file: ../bootstrappo/src/main.rs
    context: "Bootstrappo CLI entry"
  - file: Makefile.toml
    context: "Guardrail task wiring"

status: MustHaves
state: Backlog
status_capsule: (owner:@antigravity, updated:2026-01-04, status:backlog)
assignee: unassigned
