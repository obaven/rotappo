id: ARCH-010
title: 'MIG-1B: Primer CLI Contract Snapshots + Golden Tests'
type: Story
layer: 5
domain: core
component: migration-cli-primer
cli_surface:
  - primer [action|reconcile|rotate|debug|nuke|cache|generate|visualize]

description: |
  Record primer CLI outputs and help text to prevent accidental
  drift during phenome refactors. Tests live alongside primer but
  are tracked here to keep parity with phenome expectations.

deliverables:
  - CLI help/usage snapshots for primer commands
  - Optional fixture-driven outputs for non-destructive commands
  - Test harness that diffs current output against snapshots

acceptance_criteria:
  - Tests detect CLI text or flag drift
  - Fixtures avoid touching live clusters
  - Updates require explicit approval

dependencies:
  - ARCH-008

phase_gate: gitops
effort: S
risk: low

labels:
  - migration
  - cli
  - testing
  - primer

source_files:
  - file: ../primer/src/cli
    context: "Primer CLI surface"
  - file: ../primer/src/main.rs
    context: "Primer CLI entry"
  - file: ../primer/tests
    context: "Golden tests and fixtures"

status: MustHaves
state: Backlog
status_capsule: (owner:@antigravity, updated:2026-01-04, status:backlog)
assignee: unassigned
