syntax = "proto3";

package notification;

import "src/grpc/analytics.proto";

service NotificationService {
  rpc SendNotification (SendNotificationRequest) returns (SendNotificationResponse);
  rpc ConfigureChannel (ConfigureChannelRequest) returns (ConfigureChannelResponse);
}

message SendNotificationRequest {
  analytics.Severity severity = 1;
  string title = 2;
  string message = 3;
  optional string cluster_id = 4;
  optional string resource_id = 5;
  optional string action_url = 6;
}

message SendNotificationResponse {}

message ConfigureChannelRequest {
  oneof channel {
    bool in_tui = 1;
    bool system = 2;
    NtfyChannel ntfy = 3;
    WebhookChannel webhook = 4;
  }
}

message NtfyChannel {
  string url = 1;
  string topic = 2;
}

message WebhookChannel {
  string url = 1;
  map<string, string> headers = 2;
}

message ConfigureChannelResponse {}
